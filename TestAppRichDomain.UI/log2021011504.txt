2021-01-15 04:29:36.705 +02:00 [INF] Entity Framework Core 3.1.6 initialized 'SiteContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=TestAppRichDomain.Infrastructure 
2021-01-15 04:31:36.629 +02:00 [INF] Entity Framework Core 3.1.6 initialized 'SiteContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=TestAppRichDomain.Infrastructure 
2021-01-15 04:31:38.579 +02:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-01-15 04:31:42.190 +02:00 [INF] Executed DbCommand (3,571ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2021-01-15 04:35:47.828 +02:00 [INF] Entity Framework Core 3.1.6 initialized 'SiteContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=TestAppRichDomain.Infrastructure 
2021-01-15 04:35:49.161 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-01-15 04:35:51.378 +02:00 [INF] Executed DbCommand (2,147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2021-01-15 04:36:56.642 +02:00 [INF] Entity Framework Core 3.1.6 initialized 'SiteContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=TestAppRichDomain.Infrastructure 
2021-01-15 04:37:10.056 +02:00 [INF] Executed DbCommand (2,333ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [v3];
2021-01-15 04:37:10.931 +02:00 [INF] Executed DbCommand (865ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [v3] SET READ_COMMITTED_SNAPSHOT ON;
END;
2021-01-15 04:37:11.015 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-01-15 04:37:12.816 +02:00 [INF] Executed DbCommand (1,208ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2021-01-15 04:37:17.466 +02:00 [INF] Executed DbCommand (4,648ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] nvarchar(450) NOT NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2021-01-15 04:37:19.192 +02:00 [INF] Executed DbCommand (1,724ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Baskets] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(40) NOT NULL,
    CONSTRAINT [PK_Baskets] PRIMARY KEY ([Id])
);
2021-01-15 04:37:19.291 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Items] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(50) NOT NULL,
    [Description] nvarchar(1000) NOT NULL,
    [Image] nvarchar(max) NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [IsAviable] bit NOT NULL,
    CONSTRAINT [PK_Items] PRIMARY KEY ([Id])
);
2021-01-15 04:37:19.300 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(max) NULL,
    [OrderDate] datetime2 NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [Comment] nvarchar(max) NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([Id])
);
2021-01-15 04:37:19.369 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2021-01-15 04:37:19.381 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2021-01-15 04:37:19.549 +02:00 [INF] Executed DbCommand (167ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2021-01-15 04:37:19.582 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2021-01-15 04:37:19.596 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2021-01-15 04:37:19.601 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BasketItems] (
    [Id] int NOT NULL IDENTITY,
    [Price] decimal(18,2) NOT NULL,
    [Quantity] int NOT NULL,
    [ItemId] int NOT NULL,
    [BasketId] int NOT NULL,
    CONSTRAINT [PK_BasketItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_BasketItems_Baskets_BasketId] FOREIGN KEY ([BasketId]) REFERENCES [Baskets] ([Id]) ON DELETE CASCADE
);
2021-01-15 04:37:19.610 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderItems] (
    [Id] int NOT NULL IDENTITY,
    [Item_ItemId] int NULL,
    [Item_Title] nvarchar(50) NULL,
    [Price] decimal(18,2) NOT NULL,
    [Quantity] int NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderItems_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]) ON DELETE NO ACTION
);
2021-01-15 04:37:19.626 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2021-01-15 04:37:19.654 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2021-01-15 04:37:19.660 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2021-01-15 04:37:19.662 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2021-01-15 04:37:19.664 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2021-01-15 04:37:19.718 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2021-01-15 04:37:19.796 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2021-01-15 04:37:19.801 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BasketItems_BasketId] ON [BasketItems] ([BasketId]);
2021-01-15 04:37:19.811 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderItems_OrderId] ON [OrderItems] ([OrderId]);
2021-01-15 04:37:25.934 +02:00 [INF] Executed DbCommand (234ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2021-01-15 04:37:26.474 +02:00 [INF] Executed DbCommand (140ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);
2021-01-15 04:37:26.650 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-01-15 04:37:26.862 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2021-01-15 04:37:26.895 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-01-15 04:37:26.939 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2021-01-15 04:37:26.976 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2021-01-15 04:37:26.992 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2021-01-15 04:37:27.033 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-01-15 04:37:27.151 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
VALUES (@p0, @p1);
2021-01-15 04:37:27.356 +02:00 [INF] Executed DbCommand (197ms) [Parameters=[@p14='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p15='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13
WHERE [Id] = @p14 AND [ConcurrencyStamp] = @p15;
SELECT @@ROWCOUNT;
2021-01-15 04:37:27.476 +02:00 [INF] User profile is available. Using 'C:\Users\m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-15 04:37:30.322 +02:00 [INF] VersionMigration migrating
2021-01-15 04:37:30.325 +02:00 [INF] Beginning Transaction
2021-01-15 04:37:30.335 +02:00 [INF] BEGIN TRANSACTION
2021-01-15 04:37:30.369 +02:00 [INF] CreateTable VersionInfo
2021-01-15 04:37:30.391 +02:00 [INF] CREATE TABLE [dbo].[VersionInfo] ([Version] BIGINT NOT NULL)
2021-01-15 04:37:30.519 +02:00 [INF] => 0,1462107s
2021-01-15 04:37:30.521 +02:00 [INF] Committing Transaction
2021-01-15 04:37:30.525 +02:00 [INF] COMMIT TRANSACTION
2021-01-15 04:37:30.525 +02:00 [INF] VersionMigration migrated
2021-01-15 04:37:30.525 +02:00 [INF] => 0,1554949s
2021-01-15 04:37:32.641 +02:00 [INF] VersionUniqueMigration migrating
2021-01-15 04:37:32.642 +02:00 [INF] Beginning Transaction
2021-01-15 04:37:32.643 +02:00 [INF] BEGIN TRANSACTION
2021-01-15 04:37:32.679 +02:00 [INF] CreateIndex VersionInfo (Version)
2021-01-15 04:37:32.692 +02:00 [INF] CREATE UNIQUE CLUSTERED INDEX [UC_Version] ON [dbo].[VersionInfo] ([Version] ASC)
2021-01-15 04:37:32.715 +02:00 [INF] => 0,0353008s
2021-01-15 04:37:32.715 +02:00 [INF] AlterTable VersionInfo
2021-01-15 04:37:32.716 +02:00 [INF] 
2021-01-15 04:37:32.717 +02:00 [INF] => 0,0014353s
2021-01-15 04:37:32.718 +02:00 [INF] CreateColumn VersionInfo AppliedOn DateTime
2021-01-15 04:37:32.723 +02:00 [INF] ALTER TABLE [dbo].[VersionInfo] ADD [AppliedOn] DATETIME
2021-01-15 04:37:32.868 +02:00 [INF] => 0,1498957s
2021-01-15 04:37:32.868 +02:00 [INF] Committing Transaction
2021-01-15 04:37:32.884 +02:00 [INF] COMMIT TRANSACTION
2021-01-15 04:37:32.885 +02:00 [INF] VersionUniqueMigration migrated
2021-01-15 04:37:32.885 +02:00 [INF] => 0,1667426s
2021-01-15 04:37:36.332 +02:00 [INF] VersionDescriptionMigration migrating
2021-01-15 04:37:36.333 +02:00 [INF] Beginning Transaction
2021-01-15 04:37:36.357 +02:00 [INF] BEGIN TRANSACTION
2021-01-15 04:37:36.360 +02:00 [INF] AlterTable VersionInfo
2021-01-15 04:37:36.360 +02:00 [INF] 
2021-01-15 04:37:36.360 +02:00 [INF] => 8,99E-05s
2021-01-15 04:37:36.360 +02:00 [INF] CreateColumn VersionInfo Description String
2021-01-15 04:37:36.362 +02:00 [INF] ALTER TABLE [dbo].[VersionInfo] ADD [Description] NVARCHAR(1024)
2021-01-15 04:37:36.458 +02:00 [INF] => 0,0975699s
2021-01-15 04:37:36.458 +02:00 [INF] Committing Transaction
2021-01-15 04:37:36.471 +02:00 [INF] COMMIT TRANSACTION
2021-01-15 04:37:36.471 +02:00 [INF] VersionDescriptionMigration migrated
2021-01-15 04:37:36.471 +02:00 [INF] => 0,1103447s
2021-01-15 04:37:37.842 +02:00 [INF] Migrations
2021-01-15 04:37:37.858 +02:00 [INF] 1610594911: Migration_1610594911 (not applied)
2021-01-15 04:37:37.875 +02:00 [INF] 1610594911: Migration_1610594911 migrating
2021-01-15 04:37:37.875 +02:00 [INF] Beginning Transaction
2021-01-15 04:37:37.879 +02:00 [INF] BEGIN TRANSACTION
2021-01-15 04:37:37.915 +02:00 [INF] CreateTable Items
2021-01-15 04:37:37.917 +02:00 [INF] CREATE TABLE [dbo].[Items] ([Id] INT NOT NULL IDENTITY(1,1), [Title] NVARCHAR(255) NOT NULL, [Description] NCHAR(1000) NOT NULL, [Image] NVARCHAR(255) NOT NULL, [Price] DECIMAL(19,5) NOT NULL, [IsAviable] BIT NOT NULL, CONSTRAINT [PK_Items] PRIMARY KEY ([Id]))
2021-01-15 04:37:37.955 +02:00 [ERR] An error occured executing the following sql:
CREATE TABLE [dbo].[Items] ([Id] INT NOT NULL IDENTITY(1,1), [Title] NVARCHAR(255) NOT NULL, [Description] NCHAR(1000) NOT NULL, [Image] NVARCHAR(255) NOT NULL, [Price] DECIMAL(19,5) NOT NULL, [IsAviable] BIT NOT NULL, CONSTRAINT [PK_Items] PRIMARY KEY ([Id]))
The error was В базе данных уже существует объект с именем "Items".

System.Exception: An error occured executing the following sql:
CREATE TABLE [dbo].[Items] ([Id] INT NOT NULL IDENTITY(1,1), [Title] NVARCHAR(255) NOT NULL, [Description] NCHAR(1000) NOT NULL, [Image] NVARCHAR(255) NOT NULL, [Price] DECIMAL(19,5) NOT NULL, [IsAviable] BIT NOT NULL, CONSTRAINT [PK_Items] PRIMARY KEY ([Id]))
The error was В базе данных уже существует объект с именем "Items".

 ---> System.Data.SqlClient.SqlException (0x80131904): В базе данных уже существует объект с именем "Items".
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at FluentMigrator.Runner.Processors.SqlServer.SqlServerProcessor.ExecuteNonQuery(String sql)
ClientConnectionId:780032e9-5120-4795-aa16-3f81538c2a53
Error Number:2714,State:6,Class:16
   --- End of inner exception stack trace ---
   at FluentMigrator.Runner.Processors.SqlServer.SqlServerProcessor.ExecuteNonQuery(String sql)
   at FluentMigrator.Runner.Processors.SqlServer.SqlServerProcessor.Process(String sql)
   at FluentMigrator.Runner.Processors.ProcessorBase.Process(CreateTableExpression expression)
   at FluentMigrator.Expressions.CreateTableExpression.ExecuteWith(IMigrationProcessor processor)
   at FluentMigrator.Runner.MigrationRunner.<>c__DisplayClass80_0.<ExecuteExpressions>b__1()
   at FluentMigrator.Runner.StopWatch.Time(Action action)
   at FluentMigrator.Runner.MigrationRunner.ExecuteExpressions(ICollection`1 expressions)
2021-01-15 04:37:38.081 +02:00 [INF] Rolling back transaction
2021-01-15 04:37:38.084 +02:00 [INF] ROLLBACK TRANSACTION
2021-01-15 04:38:37.329 +02:00 [INF] Entity Framework Core 3.1.6 initialized 'SiteContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=TestAppRichDomain.Infrastructure 
2021-01-15 04:38:39.742 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-01-15 04:38:41.318 +02:00 [INF] Executed DbCommand (1,548ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2021-01-15 04:38:46.656 +02:00 [INF] User profile is available. Using 'C:\Users\m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-15 04:38:52.403 +02:00 [INF] Migrations
2021-01-15 04:38:52.423 +02:00 [INF] 1610594911: Migration_1610594911 (not applied)
2021-01-15 04:38:52.445 +02:00 [INF] 1610594911: Migration_1610594911 migrating
2021-01-15 04:38:52.450 +02:00 [INF] Beginning Transaction
2021-01-15 04:38:52.464 +02:00 [INF] BEGIN TRANSACTION
2021-01-15 04:38:52.521 +02:00 [INF] INSERT INTO [dbo].[Items] ([Title], [Description], [Price], [IsAviable], [Image]) VALUES (N'Assorted Chocolate Candy', N'Venenatis tellus in metus vulputate eu scelerisque felis imperdiet proin. Quisque egestas diam in arcu cursus. Sed viverra tellus in hac. Quis commodo odio aenean sed adipiscing diam donec adipiscing.', 14.5, 1, N'\Images\chocolateCandy2.jpg')
2021-01-15 04:38:52.988 +02:00 [INF] INSERT INTO [dbo].[Items] ([Title], [Description], [Price], [IsAviable], [Image]) VALUES (N'Another Assorted Chocolate Candy', N'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Cursus risus at ultrices mi tempus imperdiet nulla malesuada pellentesque. Tortor posuere ac ut consequat. Sagittis nisl rhoncus mattis rhoncus urna neque viverra justo. Lacus sed turpis tincidunt id aliquet risus feugiat in. Viverra aliquet eget sit amet tellus cras adipiscing enim eu.', 10, 1, N'\Images\chocolateCandy.jpg')
2021-01-15 04:38:52.997 +02:00 [INF] INSERT INTO [dbo].[Items] ([Title], [Description], [Price], [IsAviable], [Image]) VALUES (N'Another Chocolate Candy', N'Turpis egestas pretium aenean pharetra magna ac placerat vestibulum. Sed faucibus turpis in eu mi bibendum neque egestas. At in tellus integer feugiat scelerisque. Elementum integer enim neque volutpat ac tincidunt.', 11.5, 1, N'\Images\chocolateCandy3.jpg')
2021-01-15 04:38:53.000 +02:00 [INF] INSERT INTO [dbo].[Items] ([Title], [Description], [Price], [IsAviable], [Image]) VALUES (N'Assorted Fruit Candy', N'Vitae congue eu consequat ac felis donec et. Praesent semper feugiat nibh sed pulvinar proin gravida hendrerit. Vel eros donec ac odio. A lacus vestibulum sed arcu non odio euismod lacinia at. Nisl suscipit adipiscing bibendum est ultricies integer. Nec tincidunt praesent semper feugiat nibh.', 7.5, 1, N'\Images\fruitCandy.jpg')
2021-01-15 04:38:53.003 +02:00 [INF] INSERT INTO [dbo].[Items] ([Title], [Description], [Price], [IsAviable], [Image]) VALUES (N'Fruit Candy', N'Purus sit amet luctus venenatis lectus magna fringilla. Consectetur lorem donec massa sapien faucibus et molestie ac. Sagittis nisl rhoncus mattis rhoncus urna neque viverra.', 13, 1, N'\Images\fruitCandy2.jpg')
2021-01-15 04:38:53.007 +02:00 [INF] -> 5 Insert operations completed in 00:00:00.4952980 taking an average of 00:00:00.0990596
2021-01-15 04:38:53.008 +02:00 [INF] INSERT INTO [dbo].[VersionInfo] ([Version], [AppliedOn], [Description]) VALUES (1610594911, '2021-01-15T02:38:53', N'Migration_1610594911')
2021-01-15 04:38:53.094 +02:00 [INF] Committing Transaction
2021-01-15 04:38:53.099 +02:00 [INF] COMMIT TRANSACTION
2021-01-15 04:38:53.099 +02:00 [INF] 1610594911: Migration_1610594911 migrated
2021-01-15 04:38:53.103 +02:00 [INF] => 0,096291s
2021-01-15 04:38:54.977 +02:00 [INF] Request starting HTTP/2.0 GET https://localhost:44317/  
2021-01-15 04:38:55.110 +02:00 [INF] Executing endpoint 'TestAppRichDomain.UI.Controllers.HomeController.Index (TestAppRichDomain.UI)'
2021-01-15 04:38:55.230 +02:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(Int32) on controller TestAppRichDomain.UI.Controllers.HomeController (TestAppRichDomain.UI).
2021-01-15 04:38:55.303 +02:00 [INF] Entity Framework Core 3.1.6 initialized 'SiteContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=TestAppRichDomain.Infrastructure 
2021-01-15 04:38:55.788 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Description], [i].[Image], [i].[IsAviable], [i].[Price], [i].[Title]
FROM [Items] AS [i]
2021-01-15 04:38:55.992 +02:00 [INF] Executing ViewResult, running view Index.
2021-01-15 04:38:56.264 +02:00 [INF] Executed ViewResult - view Index executed in 277.8262ms.
2021-01-15 04:38:56.268 +02:00 [INF] Executed action TestAppRichDomain.UI.Controllers.HomeController.Index (TestAppRichDomain.UI) in 1037.4825ms
2021-01-15 04:38:56.270 +02:00 [INF] Executed endpoint 'TestAppRichDomain.UI.Controllers.HomeController.Index (TestAppRichDomain.UI)'
2021-01-15 04:38:56.294 +02:00 [INF] Request finished in 1329.4287ms 200 text/html; charset=utf-8
